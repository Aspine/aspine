<div id="admin" class="tabcontent">
	<details>
		<summary>Server Data</summary>
		<textarea id="data-input" style="width: 100%; height: 300px;">unable to get server data</textarea>
		<div style="border-style: outset; color: var(--black); cursor: pointer; width: 200px;" id="data-update-button">Save to Server</div>
	</details>
	
	<!-- tremble before my bad code -->
	<script>

async function getData() {
	let response = await fetch('serverdata');
	return response.json();
}

getData().then((data) => {
	document.getElementById('data-input').value = JSON.stringify(data, null, 2);
});
		
// post function
async function postData(data) {
	var response = await fetch(location.origin + '/serverdata', {
		method: 'POST',
		headers: {'Content-Type': 'application/json'},
		body: JSON.stringify(data)
	});
	return response.json(); // parses JSON response into native JavaScript objects
}

document.getElementById('data-update-button').addEventListener('click', () => {
	try {
		jsonToPost = JSON.parse(document.getElementById('data-input').value);
		if (window.confirm("Are you sure you want to change this? This cannot be undone.")) {
			postData(jsonToPost);
			location.reload();
		}
	} catch(err) {
		window.alert(err.stack);
	}
});
	</script>
</div>